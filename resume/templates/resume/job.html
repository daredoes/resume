{% extends 'base.html' %}
{% block title %}Create New Account{% endblock %}
{% block content %}
<div class="container">
    <div class="row">
        <div class="col s12 ">
            <div class="card grey lighten-4">
                <div class="card-content">
                    <span class="card-title center"><h3>Job Information</h3></span>
                    <div class="input-field">
                        <select onchange="selectExperience(value)">
                            <option value="" disabled selected>Choose another Job</option>
                            <option value="../resume/experience?user_id={{ user.id }}">New Job</option>
                            {% for e in user.job_experiences %}
                            <option  value="../resume/experience?id={{ e.id }}">{{ e.name }}, {{ e.start_date }} - {{ e.end_date }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <form action="" method="post">
                        {{ csrf_token() }}
                        <input name="user_id" value="{{ user.id }}" hidden/>
                        <div class="row">
                            <div class="col s12">
                                <label for="experience_name">Organization Name</label>
                                <input type="text" name="name" id="experience_name" value="{{item.name}}" placeholder=""/>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col s12 input-field">
                                <label for="start_date">Start Date</label>
                                <input type="date" class="datepicker" id="start_date" name="start_date" value="{{item.start_date}}">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col s12 input-field">
                                <label for="end_date">End Date</label>
                                <input type="date" class="datepicker" id="end_date" name="end_date" value="{{item.end_date}}">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col s12">
                                <label for="job_title">Job Title</label>
                                <input type="text" name="job_title" id="job_title" value="{{item.job_title}}" placeholder=""/>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col s12 input-field">
                                <label for="desc">Job Description</label>
                                <textarea placeholder="Job Description" name="description" id="desc" >{{item.description}}</textarea>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col s6 input-field">
                                <button class="waves-effect waves-light btn right" >Save</button>
                            </div>
                            <div class="col s6 input-field">
                                <a class="waves-effect waves-light btn" href="#!" onclick="deleteThis()">Delete</a>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

    </div>
</div>
<script>

    var deleteThis = function(){
        $.post("delete_job", {
            "csrf_token": csrf_token,
            "id": '{{ item.id }}'
        },
        function(data, status){
            if(data){
                window.open("../resume/job?user_id={{ user.id }}", "_self");
            }
        });
    };

    var selectExperience = function(value){
      window.open(value, "_self");
    };

</script>
{% endblock %}

{% block jquery_ready %}
$('select').material_select();

$('.datepicker').pickadate({
    selectMonths: true, // Creates a dropdown to control month
    selectYears: 115 // Creates a dropdown of 15 years to control year
  });

$('#desc').trumbowyg();
{% endblock %}
